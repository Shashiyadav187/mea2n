<div class="child-view-container col-sm-12">
    <div class="form-header">
        <div class="row">
            <h4 class="col-md-12 text-center">ACCOUNT</h4>
        </div>
    </div>
    <div class="row">
        <alert *ngIf="!!error" [type]="'danger'" (onclose)="closeAlert()">
            {{error}}
        </alert>
        <alert *ngIf="!!info" [type]="'info'" (onclose)="closeAlert()">
            {{info}}
        </alert>
    </div>
    <div class="row">
        <form *ngIf="showAccountForm" [ngFormModel]="signUpForm" no-validate (submit)="onSubmit(signUpForm.value)">
            <div class="form-group" [ngClass]="{ 'has-error' :!signUpForm.controls['username'].valid && submitted}">
                <label for="username">*Username</label>
                <input type="text" id="username" class="form-control" #username="ngForm" [(ngModel)]="account.username" ngControl="username"
                    placeholder="name">
            </div>
            <div *ngIf="!username.control.valid && submitted">
                <div class="form-group" *ngIf="username.control.hasError('required')">
                    Username field is required
                </div>
            </div>

            <div class="form-group" [ngClass]="{ 'has-error' :!signUpForm.controls['email'].valid && submitted}">
                <label for="email">*Email</label>
                <input type="email" id="email" class="form-control" #email="ngForm" [(ngModel)]="account.email" ngControl="email" placeholder="email">
                <div *ngIf="!email.control.valid && submitted">
                    <div class="form-group" *ngIf="email.control.hasError('email')">
                        Email {{email.control.value}} is not valid email address
                    </div>
                    <div class="form-group" *ngIf="email.control.hasError('required')">
                        Email field is required
                    </div>
                </div>
            </div>
            <div class="form-group" [ngClass]="{ 'has-error' :!signUpForm.controls['oldpassword'].valid && submitted}">
                <label for="oldpassword">*Password</label>
                <input type="password" id="oldpassword" class="form-control" #oldpassword="ngForm" ngControl="oldpassword" placeholder="password">
                <div *ngIf="!oldpassword.control.valid && submitted">
                    <div class="form-group" *ngIf="oldpassword.control.hasError('required')">
                        You should enter correct password to change account data
                    </div>
                </div>
            </div>
            <div class="form-group" [ngClass]="{ 'has-error' :!signUpForm.controls['newpassword'].valid && submitted}">
                <label for="password">New Password</label>
                <securedinput [id]="'password'" ngControl="newpassword">
                    <div *ngIf="signUpForm.controls['newpassword'].hasError('longerifexists')">
                        Password field should be not less then 6
                    </div>
                </securedinput>
            </div>
            <button type="submit" class="btn btn-primary submit-form-button">Change</button>
        </form>
    </div>
    <div class="row" *ngIf="!showAccountForm">
        <div class="col-md-12 form-header">
            <a href="{{account?.profileUrl}}" class="btn btn-default github-button" ngClass="{{account.provider}}-button" target="_blank">
                <i class="fa fa-github"></i> {{account.provider | uppercase}}
            </a>
        </div>
    </div>
</div>
<loader *ngIf="loading"></loader>